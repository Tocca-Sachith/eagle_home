generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id            String    @id @default(cuid())
  email         String    @unique
  name          String
  password      String
  role          String    @default("USER") // USER, ADMIN
  isActive      Boolean   @default(true)
  lastLogin     DateTime?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  createdBy     String?

  @@index([email])
  @@index([role])
}

model Inquiry {
  id              String   @id @default(cuid())
  fullName        String
  country         String?
  email           String
  phone           String?
  serviceType     String
  hasLand         Boolean?
  desiredLocation String?
  budgetRange     String?
  message         String?
  createdAt       DateTime @default(now())

  @@index([createdAt])
}

model Customer {
  id         String   @id @default(cuid())
  fullName   String
  email      String?
  phone      String?
  country    String?
  isOverseas Boolean  @default(false)
  notes      String?
  createdAt  DateTime @default(now())

  projects   Project[]
}

model Project {
  id              String   @id @default(cuid())
  title           String
  location        String?
  projectType     String
  status          String   @default("PLANNING")
  budgetTotal     Float?
  startDate       DateTime?
  endDatePlanned  DateTime?
  createdAt       DateTime @default(now())

  customerId      String?
  customer        Customer? @relation(fields: [customerId], references: [id], onDelete: SetNull)

  @@index([status])
  @@index([createdAt])
}
